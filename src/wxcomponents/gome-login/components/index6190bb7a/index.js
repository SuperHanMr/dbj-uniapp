var window=window||{};window.webpackJsonp=require("../../bundle.js"),module.exports=(window.webpackJsonp=window.webpackJsonp||[]).push([["components/index6190bb7a/index"],{"./src/components/oldUserReg/index.js?packageName=main&resourcePath=%2FUsers%2Ffwind%2Fgome%2Fgitlab%2Fgome-mini%2Fpackages%2Flogin%2Fsrc%2Fcomponents%2FoldUserReg%2Findex.mpx":function(e,t,o){"use strict";var n=o("./src/utils/apis.js"),i=o("./src/utils/regular.js"),s=o("./src/utils/index.js"),a=o("./src/constants.js");Component({properties:{loginData:{type:Object,value:{}}},data:{height:0,title:"",isShowWarning:!0,identifyLevel:!1,showLayer:!1,phone:"",code:"",codeTxt:"获取验证码",codeIsClick:!0,confirmIsClick:!0,countdownValue:120,codeHide:!1,countdownHide:!1,phoneClear:!1,codeClear:!1,countdown:120,phoneFocus:!1,bindState:!1,platForm:"",themeStyle:a.a},lifetimes:{attached(){let e="",t=Object(s.b)("identifyLevel"),o=Object(s.b)("isShowWarning");const{appId:n,ctx:i,imgHeight:a,imgUrl:c,imgWidth:h,sharerUnionId:d,sharerUserId:r,code:l,platForm:u,whereFromStr:m,themeConfig:p}=this.data.loginData;if(105==l?e="请绑定一个真快乐账号，此手机号可用于登录和找回密码。":106==l&&(e="为了保障您的账号安全，请完善手机号，此手机号可用于登录和找回密码。"),t=2==t||1==t,"Y"==o&&(o=!0),this.setData({title:e,identifyLevel:t,isShowWarning:o,appId:n,ctx:i,imgUrl:c,imgWidth:h,imgHeight:a,sharerUnionId:d,sharerUserId:r,platForm:u,whereFromStr:m}),p){const{backgroundColor:e,fontColor:t}=p;let o="";e&&(o+=`--background-color:${e};`),t&&(o+=`--font-color:${t};`),this.setData({themeStyle:o})}wx.setNavigationBarTitle({title:e})}},methods:{bindPhoneInput:function(e){let t=!0;const o=e.detail.value,n=o.length;11==n&&(t=!1),this.setData({phone:o,codeIsClick:t,phoneClear:!!n}),this.dealConfirmIsClick()},bindPhoneFocus:function(e){const t=e.detail.value;this.setData({phoneClear:!!t})},bindPhoneBlur:function(e){const t=e.detail.value;this.setData({phoneClear:!!t})},bindCodeInput:function(e){const t=e.detail.value,o=t.length,{phone:n}=this.data;11==n.length&&Object(i.b)(n)?wx.showToast({title:"手机号错误",icon:"none"}):this.setData({code:t,codeClear:!!o}),this.dealConfirmIsClick()},bindCodeFocus:function(e){const t=e.detail.value;this.setData({codeClear:!!t})},bindClearPhone:function(){this.setData({phone:"",phoneClear:!1,codeIsClick:!0}),this.dealConfirmIsClick()},bindClearCode:function(){this.setData({code:"",codeClear:!1}),this.dealConfirmIsClick()},bindCodeBlur:function(e){const t=e.detail.value;this.setData({codeClear:!!t.length})},getCodeEvent:function(e){let t=this;const{appId:o,phone:s,codeIsClick:a,showLayer:c,whereFromStr:h,platForm:d,ctx:r}=this.data;if(a)wx.showToast({title:"请输入手机号",icon:"none"});else if(Object(i.b)(s))wx.showToast({title:"手机号错误",icon:"none"});else{const i={appId:o,mobile:s};h&&(i.whereFrom=h),c?this.setData({showLayer:!1}):(i.isValidatePhone=1,i.isChangeBind="wx"==d?e:""),n.a.sendSMSOnBind(i,r,{success(e){1!=e.data.isShow||c?t.triggerEvent("oldGetCode",{res:e}):t.setData({showLayer:!0})},catch(e){wx.showToast({title:"获取验证码失败，请稍后再试",icon:"none"})}})}},dealCountdown:function(){let e=this;e.data.countdownValue>1?(e.data.countdownValue--,e.setData({codeIsClick:!0,codeTxt:`${e.data.countdownValue}s`}),setTimeout((function(){e.dealCountdown()}),1e3)):e.setData({codeIsClick:!1,countdownHide:!1,countdownValue:120,codeTxt:"重新获取"})},resetCountdown:function(){this.countdownValue=120,this.setData({countdown:this.countdownValue,codeHide:!1,codeTxt:"重新获取",countdownHide:!0})},dealConfirmIsClick:function(){const{phone:e,code:t}=this.data,o=!Object(i.d)(t);let n=!0;11!=e.length||o||(n=!1),this.setData({confirmIsClick:n})},closeLayer:function(){this.setData({showLayer:!1,bindState:!1})},stepoverBind:function(){const{platForm:e,whereFromStr:t}=this.data,o={puserId:Object(s.b)("sharerUserId"),headimg:"ali"==e?Object(s.b)("userInfo").avatar:Object(s.b)("userInfo").avatarUrl,snsUserName:Object(s.b)("userInfo").nickName};t&&(o.whereFrom=t),n.a.stepoverBind(o,{success(e){const{code:t,SCN:o,gradeNO:n,gradeName:i,loginName:a,message:c}=e.data;200==t?(Object(s.c)("scn",o),Object(s.c)("date",Date.now()),Object(s.c)("memberInfo",{gradeNO:n||"",gradeName:i||"",loginName:a||""}),wx.navigateBack({delta:2})):403==t?wx.redirectTo({url:"../loginEmpower/loginEmpower"}):wx.showToast({title:c,icon:"none"})}})},callPhone:function(e){const t=e.target.dataset.phone;wx.makePhoneCall({phoneNumber:t})},doneEvent:function(){const e=this,{appId:t,phone:o,code:a,whereFromStr:c,platForm:h,ctx:d}=this.data;if(Object(i.b)(o)||11!=o.length)wx.showToast({title:"请输入正确的手机号",icon:"none"});else if(6!=a.length)wx.showToast({title:"请输入验证码",icon:"none"});else{const i=Object(s.b)("userInfo"),r=Object(s.b)("sharerUserId"),{avatar:l,avatarUrl:u,nickName:m}=i,p={appId:t,mobile:o,msgCode:a,puserId:r,headimg:"ali"==h?l:u,snsUserName:m};c&&(p.whereFrom=c),n.a.activeMobile(p,d,{success(t){e.triggerEvent("oldActiveMobile",{res:t})}})}},switchDiffAuthory:function(){this.setData({showLayer:!1,isShowAuthoryPhone:!1,bindState:!1,phone:"",phoneClear:!1})},bindPhoneEvent:function(){this.setData({bindState:!1}),this.getCodeEvent(1)},tipsShowModal(e){let t=this;wx.showModal({title:"提示",content:e,cancelText:"更换号码",confirmText:"联系客服",confirmColor:"#F66A6B",success:function(e){e.confirm?wx.makePhoneCall({phoneNumber:"400-811-3333"}):e.cancel&&t.setData({phone:"",code:"",phoneClear:!1,codeClear:!1,codeTxt:"获取验证码",codeIsClick:!1,countdown:120,phoneFocus:!0})}})}}})},"./src/components/oldUserReg/index.mpx?packageName=main":function(e,t,o){"use strict";o.r(t),function(e){e.currentModuleId="m36b52390",e.currentCtor=Component,e.currentCtorType="component",e.currentSrcMode="wx",e.currentInject={moduleId:"m36b52390",render:function(){this._c("height",this.height),this._c("themeStyle",this.themeStyle),this._c("mpxShow",this.mpxShow)||this._c("mpxShow",this.mpxShow),this._c("imgWidth",this.imgWidth),this._c("imgHeight",this.imgHeight),this._c("title",this.title),this._c("phone",this.phone),this._c("phoneFocus",this.phoneFocus),this._c("phoneClear",this.phoneClear),this._c("code",this.code),this._c("codeClear",this.codeClear),this._c("codeIsClick",this.codeIsClick),this._c("codeTxt",this.codeTxt),this._c("confirmIsClick",this.confirmIsClick),this._c("identifyLevel",this.identifyLevel),this._c("showLayer",this.showLayer)&&this._c("isShowWarning",this.isShowWarning)&&this._c("height",this.height),this._c("bindState",this.bindState),this._r()}};o("./src/components/oldUserReg/index.js?packageName=main&resourcePath=%2FUsers%2Ffwind%2Fgome%2Fgitlab%2Fgome-mini%2Fpackages%2Flogin%2Fsrc%2Fcomponents%2FoldUserReg%2Findex.mpx");e.currentModuleId}.call(this,o("../../node_modules/webpack/buildin/global.js"))}},[["./src/components/oldUserReg/index.mpx?packageName=main","bundle"]]]);
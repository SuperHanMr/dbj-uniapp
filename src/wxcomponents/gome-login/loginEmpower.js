var window=window||{};window.webpackJsonp=require("./bundle.js"),module.exports=(window.webpackJsonp=window.webpackJsonp||[]).push([["loginEmpower"],{"./src/components/loginEmpower/index.js?component=true&resourcePath=%2FUsers%2Ffwind%2Fgome%2Fgitlab%2Fgome-mini%2Fpackages%2Flogin%2Fsrc%2Fcomponents%2FloginEmpower%2Findex.mpx":function(e,t,o){"use strict";function n(e){const t=e.ctx.selectComponent(e.selector);return delete e.selector,t}n.create=(e,t="#comp-newUserReg")=>{const o=n({ctx:e,selector:t});if(o)return o};function s(e){const t=e.ctx.selectComponent(e.selector);return delete e.selector,t}s.create=(e,t="#comp-oldUserReg")=>{const o=s({ctx:e,selector:t});if(o)return o};var i=o("./src/utils/apis.js"),a=o("./src/utils/index.js");Component({properties:{loginInit:{type:Object,value:{}}},data:{loginType:"",loginData:{}},lifetimes:{attached(){const{loginInit:e}=this.data,{env:t,protocol:o="http",appIdCaptcha:n,apiServer:s,constIDServer:a}=e,r={appId:n,style:"popup",apiServer:s,constIDServer:a};Object(i.b)({env:t,protocol:o}),this.setData({loginData:e,loginType:"login",riskOptions:r})}},methods:{loginSuccess(e){const{data:t,loginList:o,statusCode:n}=e.detail,{loginData:s}=this.data,{platForm:i}=s;if(t){this.loginList=o;const{code:e,SCN:n,userId:r,openId:c,upuserId:d,snsUserId:l,gomeHeadImgUrl:g,gomeNickName:m,headimg:p,loginName:h,gradeNO:u,gradeName:w,nickName:I,identifyLevel:N,isShowWarning:C,DSESSIONID:b}=t;Object(a.c)("openId",c),Object(a.c)("setUnionId",l),Object(a.c)("setUserId",r),Object(a.c)("puniqueId",d),"wx"==i&&(this.loginList.userInfo.nickName=m||I,this.loginList.userInfo.avatarUrl=g||p),Object(a.c)("userInfo",this.loginList.userInfo);let S={code:e,snsUserId:l,upuserId:d};200==e?S={...S,SCN:n,userId:r,gomeHeadImgUrl:g,gomeNickName:m,headimg:p,loginName:h,openId:c,gradeNO:u,gradeName:w}:105==e||106==e?(Object(a.d)("scn",n),Object(a.d)("dsessionId",b),Object(a.d)("identifyLevel",N),Object(a.d)("isShowWarning",C),this.setData({loginData:{...s,imgWidth:194,imgHeight:90,code:e}}),this.setData({loginType:"oldUserReg"})):6001==e&&(Object(a.d)("dsessionId",b),this.setData({loginType:"newUserReg"})),this.triggerEvent("suceess",{type:"login",data:S})}else this.triggerEvent("fail",{statusCode:n})},loginCatch(e){wx.hideLoading(),wx.showToast({title:"登录请求失败, 请检查您的网络后重试",icon:"none",mask:!0})},onPhoneCode(e){const{data:t,code:o,isChangeBind:s,phone:i}=e.detail,a=n.create(this);2e3!=o&&o!=a.data.relationNewUserCode?1009==o||600==o||1301==o||1300==o||1012==o?a.tipsShowModal(t.message):1013==o||2005==o?(a.setData({bindState:!1}),a.tipsShowModal(t.message)):2010==o?(a.setData({bindState:!1}),a.dealCompleteRelation(i)):(a.setData({showPhoneError:!0,countdownHide:!1,codeError:""}),a.dealConfirmIsClick()):(a.dealCountdown(),a.setData({showPhoneError:!0,countdownHide:!1,codeError:""}),a.dealConfirmIsClick(),1!==s&&""!==s&&a.dealCompleteRelation(i))},onRelation(e){const t=n.create(this),{code:o,extParams:s,phone:i,message:a}=e.detail;if(2e3==o){const{SCN:e,userId:t,gomeNickName:o,gomeHeadImgUrl:n,loginName:a,gradeName:r,gradeNO:c}=s;this.triggerEvent("suceess",{type:"register",data:{SCN:e,userId:t,gomeNickName:o,gomeHeadImgUrl:n,loginName:a,gradeNO:c,gradeName:r,phone:i}})}else wx.showToast({title:a,icon:"none",mask:!0,duration:2e3}),2003==o&&(i||(t.setData({code:""}),t.dealConfirmIsClick()))},oldGetCode(e){const{code:t,message:o}=e.detail.res.data,n=s.create(this);3e3==t?(n.dealCountdown(),n.dealConfirmIsClick()):1009==t||600==t||1301==t||1300==t||1012==t?n.tipsShowModal(o):1011==t||2005==t?(n.setData({bindState:!1}),n.tipsShowModal(o)):wx.showToast({title:o||"获取验证码失败，请稍后再试",icon:"none"})},oldActiveMobile(e){const{res:t}=e.detail,{code:o,message:n}=t.data,i=s.create(this);if(200==o){const{SCN:e,gomeHeadImgUrl:o,gomeNickName:n,loginName:s,gradeNO:i,gradeName:a}=t.data;this.triggerEvent("suceess",{type:"bindMobile",data:{SCN:e,gomeHeadImgUrl:o,gomeNickName:n,loginName:s,gradeNO:i,gradeName:a}})}else 2005==o?i.tipsShowModal(n):wx.showToast({title:n,icon:"none"})},toPage(e){const{loginType:t}=e.detail;this.setData({loginType:t})},onLoginQuickHandler(e){const{data:t,type:o}=e.detail;"success"===o&&this.triggerEvent("suceess",{type:"loginQuick",data:t})}}})},"./src/components/loginEmpower/index.mpx?component":function(e,t,o){"use strict";o.r(t),function(e){e.currentModuleId="m51a62c04",e.currentCtor=Component,e.currentCtorType="component",e.currentSrcMode="wx",e.currentInject={moduleId:"m51a62c04",render:function(){("login"==this._c("loginType",this.loginType)||"newUserReg"==this._c("loginType",this.loginType)||"oldUserReg"==this._c("loginType",this.loginType))&&(this._c("loginData",this.loginData),this._c("mpxShow",this.mpxShow),this._c("mpxPageStatus",this.mpxPageStatus)),this._r()}};o("./src/components/loginEmpower/index.js?component=true&resourcePath=%2FUsers%2Ffwind%2Fgome%2Fgitlab%2Fgome-mini%2Fpackages%2Flogin%2Fsrc%2Fcomponents%2FloginEmpower%2Findex.mpx");e.currentModuleId}.call(this,o("../../node_modules/webpack/buildin/global.js"))}},[["./src/components/loginEmpower/index.mpx?component","bundle"]]]);